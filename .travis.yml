os: osx
osx_image: xcode10.3
language: swift

branches:
  only:
  - master
  - develop

brefore_install:
  - gem install xcpretty --no-document --quiet
  - xcpretty --version

script: 
  - xcodebuild clean build -project Logr.xcodeproj -scheme Logr -sdk iphonesimulator -destination "platform=iOS Simulator,name=iPhone 8,OS=9.0" | xcpretty -c
  - xcodebuild clean build -project Logr.xcodeproj -scheme Logr -sdk iphonesimulato  -destination "platform=iOS Simulator,name=iPhone X,OS=latest" | xcpretty -c

  - xcodebuild test -project Logr.xcodeproj -scheme Logr -sdk iphonesimulator -destination "platform=iOS Simulator,name=iPhone 8,OS=9.0" | xcpretty -c
  - xcodebuild test -project Logr.xcodeproj -scheme Logr -sdk iphonesimulator -destination "platform=iOS Simulator,name=iPhone 8,OS=latest" | xcpretty -c
after_success:
  - bash <(curl -s https://codecov.io/bash) -J 'Logr'